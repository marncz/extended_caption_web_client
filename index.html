<html>
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css">

<script src="js/jquery.js"></script>
<script src="js/ace/src-min-noconflict/ace.js"></script>
<script src="js/frameConverter.js"></script>
<script src="js/scheduler.js"></script>

<body>
  <div class="row wrapper">
    <div class="col-md-6">
          <video id="video" width="640" height="480" controls>
            <source src="media/video-long.mp4" type="video/mp4">
          </video>

          <input type="file" id="input" onchange="sched.handleFiles(this.files[0])">

    </div>
    <div class="col-md-6" id="container">
          <canvas id="canvas" width="640" height="380" ></canvas>
          <div id="canvasWrapper">
            <canvas id="drawableCanvas" width="640" height="380"></canvas>
          </div>
<div id="editor">1 -> 2
150,150,50,5

3 -> 4
150,150,25,5

5 -> 6
250,250,100,3

15 -> 16
250,150,150,3</div>
    </div>
  </div>
  </div>
</body>
<script>
  /* ACE editor init */
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/chrome");
  editor.setReadOnly(true);

  /* Scheduler init */
  var sched = new scheduler("drawableCanvas");

  /* frameConverter initialization */
  window.onload = function() {
    video = document.getElementById("video");
    canvas = document.getElementById("canvas");
    var dispatcher = [];
    dispatcher[1] = {x: 150, y: 150, r: 50, f: 5, line: 1};
    dispatcher[3] = {x: 150, y: 150, r: 25, f: 5, line: 4};
    dispatcher[5] = {x: 250, y: 250, r: 100, f: 3, line: 7};
    dispatcher[15] = {x: 350, y: 150, r: 150, f: 3, line: 10};
    fc = new frameConverter(video, canvas, dispatcher);
  }

  /* Mouse event for generating ripples when clicking on the canvas */
  $("#drawableCanvas").click(function (e) {
      var posX = Math.ceil(e.pageX - $(this).offset().left),
          posY = Math.ceil(e.pageY - $(this).offset().top);

      sched.drawRipple(posX, posY, 80, 5);
  });
</script>
</html>
